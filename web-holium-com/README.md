# @holium/web-holium-com

## Data Flow & State Management Strategy

**TODO**

## Passport Profile

### Steps

1. Build this project using `yarn build` . This will generate the index file `out/index.html`. This file contains placeholder values for the `<meta>` tags which are populated by each ship at runtime (Sail combined with string interpolation).

- Note: see `next.config.js`. note the `nextConfig` `output` attribute is set to `export`. This will generate an `out` folder with all static assets needed to run the passport profile.

- Note: also notice in `./src/app/layout.tsx`, the metadata configuration. NextJs will generate `<meta>` tags in the header of the final index.html file. The values of these metadata are PLACEHOLDER values. The format is specifically chosen to work with Urbit string interpolation. Why? Because each ship will have to generate its own unique index.html based on its own state. And this cannot be know until runtime on a given ship (a running agent).

2. Using `%clay`, scry (https://developers.urbit.org/reference/arvo/clay/scry#x---read-file) the ship's `%realm` desk for the `./profile/index.html` (generated by build see above)

3. Use Urbit's string interpolation (https://developers.urbit.org/reference/hoon/rune/constants#strings-with-interpolation) to replace the PLACEHOLDER values in the index.html file with actual values from ship state.

### Notes

- For efficiency's sake, new versions of the ./profile/index.html file should only be generated when the agent's `on-load` is called and/or the profile information changes (e.g. saving the profile from the web; i.e. %save-profile %poke).
